<div class="container py-5">
  <!-- Header and Join Form -->
  <div class="d-flex flex-column flex-md-row justify-content-between align-items-center mb-4">
    <h2 class="fw-bold mb-3 mb-md-0 text-center text-md-start">Your Projects</h2>

    <%= form_with url: join_projects_path, method: :post, local: true, class: "d-flex align-items-center gap-2" do |f| %>
      <%= f.text_field :project_code, placeholder: "Enter project code", class: "form-control", required: true, style: "max-width: 220px;" %>
      <%= f.submit "Join", class: "btn btn-outline-primary" %>
    <% end %>
  </div>

  <% if @projects.any? %>
    <div class="row justify-content-center">
      <% @projects.each do |project| %>
        <div class="col-md-6 col-lg-4 d-flex">
          <div class="card mb-4 shadow-sm border-0 w-100">
            <div class="card-body d-flex flex-column justify-content-between">
              <div>
                <h5 class="card-title d-flex justify-content-between align-items-center">
                  <%= link_to project.name, project_project_files_path(project), class: "text-decoration-none fw-semibold text-dark" %>

                  <% if project.owner_id == current_user.id %>
                    <%= button_to project_path(project), method: :delete,
                        data: { turbo_confirm: "Are you sure you want to delete this project?" },
                        class: "btn btn-sm btn-outline-danger",
                        title: "Delete Project" do %>
                      <i class="bi bi-trash"></i>
                    <% end %>
                  <% end %>
                </h5>

                <p class="mb-1 text-muted small">
                  <i class="bi bi-hash text-secondary"></i> <strong>Slug:</strong> <%= project.slug %>
                </p>
                <p class="mb-0 text-muted small">
                  <i class="bi bi-person-fill text-secondary"></i> <strong>Owner:</strong> <%= project.owner.username %>
                </p>
              </div>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="alert alert-info text-center">You haven't joined any projects yet.</div>
  <% end %>

  <!-- Create Project Button -->
  <div class="mt-5 text-center">
    <%= link_to "âž• Create New Project", new_project_path, class: "btn btn-success btn-lg px-4 py-2 shadow-sm" %>
  </div>
</div>
