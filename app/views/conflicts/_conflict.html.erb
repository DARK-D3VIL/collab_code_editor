<div id="conflict_<%= conflict.id %>" class="conflict-item border rounded p-3 mb-3 bg-white">
  <div class="d-flex justify-content-between align-items-start mb-2">
    <h6 class="text-danger mb-0">
      ðŸ”´ Conflict on line(s): <%= conflict.lines_changed.join(', ') %>
    </h6>
    <small class="text-muted"><%= time_ago_in_words(conflict.created_at) %> ago</small>
  </div>

  <% if conflict.changed_lines.present? %>
    <% conflict.changed_lines.each do |line_num, line_data| %>
      <div class="conflict-line mb-3">
        <h6 class="mb-2">Line <%= line_num %>:</h6>
        
        <!-- Your Current Version -->
        <div class="mb-2">
          <label class="form-label text-success fw-bold">Your Current Version:</label>
          <div class="code-block bg-light-green p-2 rounded border">
            <code><%= line_data['existing'] || 'Empty line' %></code>
          </div>
        </div>

        <!-- Incoming Changes -->
        <div class="mb-2">
          <label class="form-label text-primary fw-bold">Incoming Changes:</label>
          <div class="code-block bg-light-blue p-2 rounded border">
            <code><%= line_data['incoming'] || 'Empty line' %></code>
          </div>
        </div>
      </div>
    <% end %>
  <% end %>

  <!-- Action Buttons -->
  <div class="d-flex gap-2 mt-3">
    <%= button_to "âœ… Accept Changes", 
        resolve_conflict_path(conflict), 
        method: :post,
        class: "btn btn-success btn-sm",
        remote: true,
        form: { 
          data: { 
            turbo_method: :post,
            turbo_confirm: "Accept these changes? This will overwrite your current content."
          }
        } %>
    
    <%= button_to "âŒ Keep Mine", 
        ignore_conflict_path(conflict), 
        method: :post,
        class: "btn btn-outline-secondary btn-sm",
        remote: true,
        form: { 
          data: { 
            turbo_method: :post,
            turbo_confirm: "Keep your version and ignore incoming changes?"
          }
        } %>
  </div>
</div>

<style>
  .bg-light-green {
    background-color: #d1f2d1 !important;
  }
  .bg-light-blue {
    background-color: #d1e7ff !important;
  }
  .conflict-item {
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  }
  .code-block {
    font-family: 'Monaco', 'Consolas', monospace;
    font-size: 12px;
    white-space: pre-wrap;
    word-break: break-all;
  }
</style>